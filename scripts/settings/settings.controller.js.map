{"version":3,"sources":["settings/settings.controller.js"],"names":[],"mappings":"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","file":"settings/settings.controller.js","sourcesContent":["(function () {\n    'use strict';\n\n    angular\n        .module('app.settings')\n        .controller('SettingsController', SettingsController);\n\n    SettingsController.$inject = ['$scope',\n        '$timeout',\n        '$mdSidenav',\n        '$log',\n        '$interval',\n        '$sce',\n        '$mdDialog',\n        '$mdMedia',\n        'Icecast',\n        'Track'\n    ];\n\n    /* @ngInject */\n    function SettingsController($scope,\n                                $timeout,\n                                $mdSidenav,\n                                $log,\n                                $interval,\n                                $sce,\n                                $mdDialog,\n                                $mdMedia,\n                                Icecast,\n                                Track) {\n\n        var vm = this;\n\n\n        vm.imgUrl = 'https://s3.eu-central-1.amazonaws.com/smx-static/RaiNAS_1/RaiNAS/music/live/covers/';\n\n        // vm.openMenu = openMenu;\n        // vm.openSettings = openSettings;\n        // vm.showPlayer = showPlayer;\n        // vm.chlFullTitle = '';\n        vm.slfFullTitle = '';\n        // vm.chl = homeResolve.chl;\n        // vm.slf = homeResolve.slf;\n\n        vm.enabled = true;\n\n        $interval(checkNowPlaying, 30000);\n\n        //console.log(homeResolve);\n\n        //\n        function showPlayer($event, radioChannel) {\n\n            var nowPlayingInfo;\n\n            switch (radioChannel) {\n                case 'chl':\n                    nowPlayingInfo = vm.chl;\n                    break;\n                case 'slf':\n                    nowPlayingInfo = vm.slf;\n                    break;\n                default:\n                    break;\n            }\n\n            $mdDialog.show({\n                parent: angular.element(document.body),\n                targetEvent: $event,\n                templateUrl: '/scripts/player/player.tmpl.html',\n                locals: {\n                    radioChannel: radioChannel,\n                    nowPlaying: nowPlayingInfo\n                },\n                controller: 'PlayerController as vm',\n                fullscreen: true\n            });\n\n        }\n\n        function openMenu() {\n            $mdSidenav('sidenav').toggle();\n        }\n\n        function openSettings() {\n            $mdSidenav('settingsnav').toggle();\n        }\n\n        function checkNowPlaying() {\n\n            Icecast.nowPlaying().then(function (data) {\n\n                if (vm.chlFullTitle !== data.icestats.source[0].title) {\n                    vm.chlFullTitle = data.icestats.source[0].title;\n                    getTrackInfo('chl', vm.chlFullTitle);\n                }\n\n                if (vm.slfFullTitle !== data.icestats.source[1].title) {\n                    vm.slfFullTitle = data.icestats.source[1].title;\n                    getTrackInfo('slf', vm.slfFullTitle);\n                }\n\n            });\n\n        }\n\n        function getTrackInfo(radioChannel, fullTitle) {\n\n            var fullTitleArr = fullTitle.split('__');\n            var coverUrl;\n\n            Track.trackInfo(fullTitleArr[0], fullTitleArr[1], fullTitleArr[2]).then(function (info) {\n\n                coverUrl = 'https://s3.eu-central-1.amazonaws.com/smx-static/RaiNAS_1/RaiNAS/music/live/covers/' + info[0].cover;\n\n                switch (radioChannel) {\n                    case 'chl':\n                        vm.chl = info[0];\n                        vm.chl.coverUrl = coverUrl;\n                        break;\n                    case 'slf':\n                        vm.slf = info[0];\n                        vm.slf.coverUrl = coverUrl;\n                        break;\n                    default:\n                        break;\n                }\n\n            });\n\n        }\n\n    }\n\n\n})();\n"],"sourceRoot":"/source/"}