{"version":3,"sources":["home/home.controller.js"],"names":[],"mappings":"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","file":"home/home.controller.js","sourcesContent":["(function () {\n    'use strict';\n\n    angular\n        .module('app.home')\n        .controller('HomeController', HomeController);\n\n    HomeController.$inject = ['$scope',\n        '$timeout',\n        // '$mdSidenav',\n        '$log',\n        '$interval',\n        '$sce',\n        '$document',\n        // '$mdDialog',\n        // '$mdMedia',\n        'Icecast',\n        'Track',\n        'homeResolve'\n    ];\n\n    /* @ngInject */\n    function HomeController($scope,\n                            $timeout,\n                            // $mdSidenav,\n                            $log,\n                            $interval,\n                            $sce,\n                            $document,\n                            // $mdDialog,\n                            // $mdMedia,\n                            Icecast,\n                            Track,\n                            homeResolve) {\n\n\n        // For MDL to work\n        // http://stackoverflow.com/questions/31278781/material-design-lite-integration-with-angularjs\n        $scope.$on('$viewContentLoaded', () => {\n            $timeout(() => {\n                componentHandler.upgradeAllRegistered();\n            })\n        });\n\n        var vm = this;\n\n\n        vm.imgUrl = 'https://s3.eu-central-1.amazonaws.com/smx-static/RaiNAS_1/RaiNAS/music/live/covers/';\n\n        vm.openMenu = openMenu;\n        vm.openSettings = openSettings;\n        vm.showPlayer = showPlayer;\n        vm.chlFullTitle = '';\n        vm.slfFullTitle = '';\n        // vm.chl = homeResolve.chl;\n        vm.slf = homeResolve.slf;\n        vm.isBuffering = true;\n        vm.isPlaying = false;\n        vm.play = vm.play;\n        vm.pause = vm.pause;\n        vm.showStyles = false;\n        vm.toggleStyles = toggleStyles;\n\n\n        // vm.fullScreen = fullScreen;\n\n\n        $interval(checkNowPlaying, 3000);\n\n        //console.log(homeResolve);\n        // vm.audio = angular.element(document.getElementsByTagName('audio')[0]);\n        vm.audio = document.getElementsByTagName('audio')[0];\n\n        // vm.audio.addEventListener('canplay', function() {\n        //     vm.isBuffering = false;\n        //     vm.isPlaying = true;\n        // }, false);\n\n\n        vm.play = function() {\n            vm.audio.play();\n            vm.isPlaying = true;\n        };\n\n        vm.pause = function() {\n            vm.audio.pause();\n            vm.isPlaying = false;\n        };\n\n        function fullScreen(element) {\n            console.log('hi!');\n            element.requestFullscreen();\n        }\n\n        function showPlayer($event, radioChannel) {\n\n            var nowPlayingInfo;\n\n            switch (radioChannel) {\n                // case 'chl':\n                //     nowPlayingInfo = vm.chl;\n                //     break;\n                case 'slf':\n                    nowPlayingInfo = vm.slf;\n                    break;\n                default:\n                    break;\n            }\n\n            // $mdDialog.show({\n            //     parent: angular.element(document.body),\n            //     targetEvent: $event,\n            //     templateUrl: '/scripts/player/player.tmpl.html',\n            //     locals: {\n            //         radioChannel: radioChannel,\n            //         nowPlaying: nowPlayingInfo\n            //     },\n            //     controller: 'PlayerController as vm',\n            //     fullscreen: true\n            // });\n\n        }\n\n        function openMenu() {\n            $mdSidenav('sidenav').toggle();\n        }\n\n        function openSettings() {\n            $mdSidenav('settingsnav').toggle();\n        }\n\n        function toggleStyles() {\n            vm.showStyles = !vm.showStyles;\n        }\n\n        function checkNowPlaying() {\n\n            Icecast.nowPlaying().then(function (data) {\n\n                // if (vm.chlFullTitle !== data.icestats.source[0].title) {\n                //     vm.chlFullTitle = data.icestats.source[0].title;\n                //     getTrackInfo('chl', vm.chlFullTitle);\n                // }\n\n                if (vm.slfFullTitle !== data.icestats.source[1].title) {\n                    vm.slfFullTitle = data.icestats.source[1].title;\n                    getTrackInfo('slf', vm.slfFullTitle);\n                }\n\n            });\n\n        }\n\n        function getTrackInfo(radioChannel, fullTitle) {\n\n            var fullTitleArr = fullTitle.split('__');\n            var coverUrl;\n\n            Track.trackInfo(fullTitleArr[0], fullTitleArr[1], fullTitleArr[2]).then(function (info) {\n\n                if (info[0]) {\n                    coverUrl = 'https://s3.eu-central-1.amazonaws.com/smx-static/RaiNAS_1/RaiNAS/music/live/covers/' + info[0].cover;\n                }\n\n                switch (radioChannel) {\n                    // case 'chl':\n                    //     vm.chl = info[0];\n                    //     vm.chl.coverUrl = coverUrl;\n                    //     break;\n                    case 'slf':\n                        vm.slf = info[0];\n                        if (info[0]) {\n                            vm.slf.coverUrl = coverUrl;\n                        }\n                        break;\n                    default:\n                        break;\n                }\n\n            });\n\n        }\n\n    }\n\n\n})();\n"],"sourceRoot":"/source/"}